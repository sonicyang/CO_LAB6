	.text

#=====================================================
#	Boot handler
#=====================================================
boot_handler:

	LW	$k0, BOOT_str
	LUI	$k1, 0x8000
	SW	$k0, 0($k1)
	
	#---------------------------------------------
	#	Set $sp=0x40003FFC
	#---------------------------------------------
	LUI	$sp, 0x4000
	ORI	$sp, $sp, 0x4000
	
	#---------------------------------------------
	#	Jump to user code
	#---------------------------------------------
	LUI	$k0, 0x4000
	JALR	$k0
	

#=====================================================
#	EXIT
#=====================================================

exit:	

	LW	$t0, EXIT_str
	LUI	$t1, 0x8000
	SW	$t0, 0($t1)
	
	LUI	$t0, 0xF000
	JR	$t0


#=====================================================
#	String Data
#=====================================================

EXIT_str:
	.ascii	"EXIT"
	
BOOT_str:
	.ascii	"BOOT"
	
	
		