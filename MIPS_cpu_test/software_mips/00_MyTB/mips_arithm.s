	.text
	.globl	arithm_check
	.extern flush_r8_r23
	.extern	show_new
	.extern	show_init
	.extern	show_pass
	.extern	show_error
	.extern	show_result
	.extern	show_case01
	.extern	show_case02
	#.extern	show_case03
	#.extern	show_case04
	#.extern	show_case05
	#.extern	show_case06
	#.extern	show_case07

arithm_check:

	SUBU	$sp, $sp, 4		
	SW	$ra, 0($sp)
	
	LW	$t0, ARIT_str
	LUI	$t1, 0x8000
	SW	$t0, 0($t1)
	
	JAL	show_new	
	
	#---------------------------------------------
	# Case=01	CLO instruction	
	#---------------------------------------------
	JAL	show_case01
	JAL	show_init

	LA	$2, clo_data
	JAL	flush_r8_r23
	ADDI	$8, $0, 0	#index
	ADDI	$9, $0, 32	#result
loop1:	ADD	$10, $2, $8	#base
	LW	$11, 0($10)
	CLO	$12, $11
	SUB	$12, $12, $9
	BNE	$12, $0, error
	ADDI	$8, $8, 4
	ADDI	$9, $9, -1
	SLT	$13, $9, $0
	BEQ	$13, $0, loop1	

	JAL	show_pass

	#---------------------------------------------
	# Case=02	CLZ instruction	
	#---------------------------------------------
	JAL	show_case02
	JAL	show_init

	LA	$2, clz_data
	JAL	flush_r8_r23
	ADDI	$8, $0, 0	#index
	ADDI	$9, $0, 32	#result
loop2:	ADD	$10, $2, $8	#base
	LW	$11, 0($10)
	CLZ	$12, $11
	SUB	$12, $12, $9
	BNE	$12, $0, error
	ADDI	$8, $8, 4
	ADDI	$9, $9, -1
	SLT	$13, $9, $0
	BEQ	$13, $0, loop2	

	JAL	show_pass

	#---------------------------------------------
	#	Return to main code
	#---------------------------------------------	
	JAL	show_result
	B	end
	
error:	JAL	show_error

end:	LW	$ra, 0($sp)
	ADDU	$sp, $sp, 4
	JR	$ra
		
	
ARIT_str:
	.ascii	"ARIT"


clo_data:
	.word	0b11111111111111111111111111111111 	#result = 32
	.word	0b11111111111111111111111111111110	#result = 31
	.word	0b11111111111111111111111111111101	#result = 30
	.word	0b11111111111111111111111111111011	#result = 29
	.word	0b11111111111111111111111111110101	#result = 28
	.word	0b11111111111111111111111111101111	#result = 27
	.word	0b11111111111111111111111111011111	#result = 26
	.word	0b11111111111111111111111110101001	#result = 25
	.word	0b11111111111111111111111101101111	#result = 24
	.word	0b11111111111111111111111011111110	#result = 23
	.word	0b11111111111111111111110111110111	#result = 22
	.word	0b11111111111111111111101011110110	#result = 21
	.word	0b11111111111111111111011100101111	#result = 20
	.word	0b11111111111111111110110111101111	#result = 19
	.word	0b11111111111111111101111101100111	#result = 18
	.word	0b11111111111111111011111101111111	#result = 17
	.word	0b11111111111111110111001110011111	#result = 16
	.word	0b11111111111111101111101111100111	#result = 15
	.word	0b11111111111111011111001110111111	#result = 14
	.word	0b11111111111110111111010101111010	#result = 13
	.word	0b11111111111101000111111111101111	#result = 12
	.word	0b11111111111011111100110111111011	#result = 11
	.word	0b11111111110111100100111011001011	#result = 10
	.word	0b11111111101101111111101111111011	#result = 9
	.word	0b11111111011001110101111110100111	#result = 8
	.word	0b11111110101111100110111110010001	#result = 7
	.word	0b11111101111110011111100111111111	#result = 6
	.word	0b11111011001101111000111101111011	#result = 5
	.word	0b11110110111110111011101100111011	#result = 4
	.word	0b11101111111101011111011100111110	#result = 3
	.word	0b11011100110011111111111010111011	#result = 2
	.word	0b10100110110111110110111010011111	#result = 1
	.word	0b01111110001111100111101111110111	#result = 0
	
clz_data:
	.word	0b00000000000000000000000000000000 	#result = 32
	.word	0b00000000000000000000000000000001	#result = 31
	.word	0b00000000000000000000000000000010	#result = 30
	.word	0b00000000000000000000000000000110	#result = 29
	.word	0b00000000000000000000000000001000	#result = 28
	.word	0b00000000000000000000000000010100	#result = 27
	.word	0b00000000000000000000000000100001	#result = 26
	.word	0b00000000000000000000000001000000	#result = 25
	.word	0b00000000000000000000000010101100	#result = 24
	.word	0b00000000000000000000000100000010	#result = 23
	.word	0b00000000000000000000001000110110	#result = 22
	.word	0b00000000000000000000011001011000	#result = 21
	.word	0b00000000000000000000110001010000	#result = 20
	.word	0b00000000000000000001000111001100	#result = 19
	.word	0b00000000000000000011110001110000	#result = 18
	.word	0b00000000000000000100001110100000	#result = 17
	.word	0b00000000000000001000100001011011	#result = 16
	.word	0b00000000000000010100110000010001	#result = 15
	.word	0b00000000000000100010010010001000	#result = 14
	.word	0b00000000000001001000101001001100	#result = 13
	.word	0b00000000000011011000100000100000	#result = 12
	.word	0b00000000000111100011000000000001	#result = 11
	.word	0b00000000001000000111010001000100	#result = 10
	.word	0b00000000010010110010010011100000	#result = 9
	.word	0b00000000100000000010100000011001	#result = 8
	.word	0b00000001001110000001000100000000	#result = 7
	.word	0b00000011010001000010000001000000	#result = 6
	.word	0b00000100010011110010000000000000	#result = 5
	.word	0b00001100100000000000000011010001	#result = 4
	.word	0b00010000011110001001010001001100	#result = 3
	.word	0b00100010000101001000000000000000	#result = 2
	.word	0b01000010100010010110010010010000	#result = 1
	.word	0b10001001000101010000100000001000	#result = 0
	
	